# 21 | 原子类:无锁工具类的典范

# 背景
之前累加器的例子如下：
```text
public class TestCount {
    int count = 0;
    public void add10k() {
        int idx = 0;
        while(idx ++ < 10000) {
            count += 1;
        }
    }
}
```
add10k方法不是线程安全的，问题就出在count +=1不是原子的，并且count不是可见的；可见性可以用voliate解决，
原子一直都是用互斥锁方案来解决。

其实对于简单的原子性问题，还有一种无锁方案。Java SDK 并发包将这种无锁方案封装提炼之 后，实现了一系列的原子类。

如下：     
```text
class TestAtomic {
    AtomicLong atomicLong = new AtomicLong(0);
    public void add10k() {
        int idx = 0;
        while(idx++ < 10000) {
            atomicLong.getAndIncrement();
        }
    }
}
```
代码中，AtomicLong替换了count，atomicLong.getAndIncrement()替换了 count +1；然后这个方法就变成线程安全的了
